var Actor=function(a,b,c,d,f){this.startAnimationTimestamp=(new Date).getTime();this.resetStartAnimationTimestamp=function(){this.startAnimationTimestamp=(new Date).getTime()};this.startPosition={x:b,y:c};this.vector={x:0,y:0};this.spin=this.tilt=0;this.behaviors=[];this.phases=[];this.oldPhase=0;this.phaseCycle=1E3;this.enteredAt=null;this.waitingForReset=this.doesReset=!1;this.waitingForResetSince=null;this.originalOpacity=this.currentOpacity=1;this.delay=this.originaldelay=0;this.navigatesOnTouch=
function(a,c){this.reacts("window.animation.showScene('"+a+"')",c);this.image.className+="navigation";this.scene.preloadSceneIds.push(a)};this.delays=function(a){this.delay=this.originaldelay=a};this.age=function(){return(new Date).getTime()-this.startAnimationTimestamp};this.alterOpacity=function(a){a!=this.currentOpacity&&(this.currentOpacity=a,this.image.style.opacity=this.currentOpacity)};this.setOpacity=function(a){a!=this.currentOpacity&&(this.currentOpacity=this.originalOpacity=a,this.image.style.opacity=
this.currentOpacity)};this.resets=function(a){this.doesReset=!0;"undefined"===typeof a&&(a=0);this.resetDelay=a};this.reset=function(){for(var a=0;a<this.behaviors.length;a++)try{this.behaviors[a].ontouch?delete this.behaviors[a]:this.behaviors[a].reset()}catch(g){}this.image.src="images/"+this.image.originalPath;this.resetStartAnimationTimestamp();this.position={x:b,y:c};this.vector={x:0,y:0};this.setSize(d,f);this.setOpacity(this.originalOpacity);this.delay=this.originaldelay;this.finishedDelaying=
!1;this.startedDelayingAt=null;this.tilt=0;moveActor(this);tiltActor(this)};this.setSize=function(a,c){this.imagesize={x:a,y:c};this.image.style.width=a+"px";this.image.style.height=c+"px"};this.enter=function(a){a.div.appendChild(this.image);this.enteredAt=(new Date).getTime()};this.addBehavior=function(a){try{a.reset()}catch(c){}this.behaviors.push(a)};"undefined"!=typeof delay&&(this.delay=parseInt(delay),this.startedDelayingAt=null,this.finishedDelaying=!1);this.addPhase=function(a){document.createElement("img").setAttribute("src",
"images/"+a);this.phases.push("images/"+a)};this.setPhaseCycleLength=function(a){this.phaseCycle=a};this.currentPhase=function(){var a=0,c=this.phases.length;if(1<c)var a=(new Date).getTime()-this.enteredAt,b=this.phaseCycle/c,a=parseInt(a%(c*b)/b);return a};this.setup=function(){this.image=document.createElement("img");this.image.originalPath=a;this.image.setAttribute("src","images/"+this.image.originalPath);this.image.actor=this;this.phases.push("images/"+a);this.position={x:b,y:c};this.setSize(d,
f);this.vector={x:0,y:0};moveActor(this)};this.setup()};function moveActor(a){a.position.x+=a.vector.x;a.position.y+=a.vector.y;a.image.style.left=a.position.x+"px";a.image.style.top=a.position.y+"px";a.vector={x:0,y:0}}function tiltActor(a){a.tilt=(a.tilt+a.spin)%360;a.image.style.transform="rotate("+a.tilt+"deg)";a.image.style.webkitTransform="rotate("+a.tilt+"deg)";a.image.style.msTransform="rotate("+a.tilt+"deg)";a.image.style.OTransform="rotate("+a.tilt+"deg)";a.spin=0}
function visibleOnStage(){return!notVisibleOnStage}function notVisibleOnStage(a){return a.position.x>a.scene.dimensions.x||0>a.position.x+a.imagesize.x||0>a.position.y+a.imagesize.y||a.position.y>a.scene.dimensions.y}
function animateactor(a){if(notVisibleOnStage(a))a.waitingForReset?t()-a.waitingForResetSince>=a.resetDelay&&(a.reset(),a.waitingForReset=!1):a.doesReset&&(a.alterOpacity(0),a.waitingForReset=!0,a.waitingForResetSince=t());else if(0<a.delay&&!a.finishedDelaying)null==a.startedDelayingAt?a.startedDelayingAt=t():t()>=a.startedDelayingAt+a.delay&&(a.finishedDelaying=!0);else{1<a.phases.length&&a.currentPhase()!=a.oldPhase&&(a.image.src=a.phases[a.currentPhase()],a.oldPhase=a.currentPhase());for(var b=
0;b<a.behaviors.length;b++)a.behaviors[b].applybehavior();(0!=a.vector.x||0!=a.vector.y)&&moveActor(a);0!=a.spin&&tiltActor(a)}};function Animation(a,b,c,d,f,h,g){this.firstSceneId=c;this.loadedScenes=[];this.stageDiv=createDiv("stage","stage");this.stageDiv.style.width=a+"px";this.stageDiv.style.height=b+"px";this.width=a;this.height=b;this.textIsDisplaying=!0;this.minWidth="undefined"==typeof d?this.width:d;this.maxWidth="undefined"==typeof f?this.width:f;this.minHeight="undefined"==typeof h?this.height:h;this.maxHeight="undefined"==typeof g?this.height:g;this.scaleToWindow=function(){var a=window.innerWidth,c=window.innerHeight,
b=c,d=a,f=window.innerWidth/window.innerHeight,h=this.width/this.height;if(0!=this.minWidth&&h>f){a<this.minWidth?a=this.minWidth:a>this.maxWidth&&(a=this.maxWidth);var g=a/this.width,b=a*g}else 0!=this.minWidth&&(c<this.minHeight?c=this.minHeight:c>this.maxHeight&&(c=this.maxHeight),g=c/this.height,d=c*g);1!=g&&rescale(this.stageDiv,g);window.animationwrapper.style.marginTop=(window.innerHeight-parseInt(this.height*g))/2+"px";window.animationwrapper.style.width=d+"px";window.animationwrapper.style.marginLeft=
(window.innerWidth-parseInt(this.width*g))/2+"px";window.animationwrapper.style.height=b+"px"};this.loadScene=function(c){for(var d=this.loadedScenes.length-1;0<=d;d--)if(this.loadedScenes[d].id===c)return this.loadedScenes[d];c=eval(c+"()");c.setDimensions(a,b);this.loadedScenes.push(c);this.stageDiv.appendChild(c.div);c.makeInvisible();return c};this.showScene=function(a){if("undefined"===typeof this.currentScene||1E3<this.currentScene.age()||"undefined"!==typeof developermode&&developermode)this.currentScene=
loadScene(a),a=getIntegerFromEndOfString(a),window.location.hash=0==a?"":a,this.currentScene.enterActors(),this.currentScene.resetActors(),this.currentScene.makeOthersInvisible(),this.currentScene.muteOthers(),this.currentScene.resetAge(),this.dropUnneededScenes(this.currentScene.preloadSceneIds),this.loadNeededScenes(this.currentScene.preloadSceneIds)};this.showFirstScene=function(){this.showScene(this.firstSceneId)};this.loadedSceneIds=function(){for(var a=[],c=this.loadedScenes.length-1;0<=c;c--)a.push(this.loadedScenes[c].id);
return a};this.dropUnneededScenes=function(a){for(var a=this.loadedSceneIds().minus(a),c=a.length-1;0<=c;c--)this.dropScene(a[c])};this.loadNeededScenes=function(a){for(var a=a.minus(this.loadedSceneIds()),c=a.length-1;0<=c;c--)this.loadScene(a[c])};this.dropScene=function(a){for(var c=this.loadedScenes.length-1;0<=c;c--)this.loadedScenes[c].id===a&&(document.getElementById(a),this.stageDiv.removeChild(this.loadedScenes[c].div),this.loadedScenes=this.loadedScenes.without(c))};return this}
function loadAnimation(a,b,c,d,f,h,g,e){document.title=a;if(browserCompatible()){if(window.onload)var i=window.onload;window.onload=function(){i&&i();setTimeout(function(){window.scrollTo(0,1)},100);window.animation=Animation(b,c,d,f,h,g,e);window.animationwrapper=createDiv("animationwrapper","");window.document.body.appendChild(window.animationwrapper);window.animation.scaleToWindow();window.animationwrapper.appendChild(this.stageDiv);var a=parseInt(window.location.hash.substring(1));isNaN(a)?window.animation.showScene(d):
eval("window.animation.showScene('scene"+a+"')");window.animation.startLoop()};if(window.onresize)var j=window.onresize;window.onresize=function(){j&&j();window.animation.scaleToWindow()}}else a=document.createElement("div"),a.setAttribute("id","compatibility"),a.innerHTML+="<h1>Please upgrade your browser</h1>",a.innerHTML+="<p>You need a more modern browser to view this awesome animation.</p>",a.innerHTML+='<p>More information: <a href="http://animation.io/compatible-browsers.html">http://animation.io/compatible-browsers.html</a></p>',
document.body.appendChild(a)}requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}();function startLoop(){this.animloop=function(){requestAnimFrame(animloop);for(var a=0;a<window.currentScene.actors.length;a++)animateactor(window.currentScene.actors[a])};this.animloop()}
Array.prototype.minus=function(a){for(var b=this,c=b.length-1;0<=c;c--)for(var d=a.length-1;0<=d;d--)if(a[d].match(b[c])){b=b.without(c);break}return b};Array.prototype.minus=function(a){for(var b=this,c=b.length-1;0<=c;c--)for(var d=a.length-1;0<=d;d--)if(a[d].match(b[c])){b=b.without(c);break}return b};Array.prototype.without=function(a){var b=0<a?this.slice(0,a):[],a=this.slice(a+1);return b.concat(a)};function bindEvent(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)};function l(a){console.log(a)}function round(a,b){0>b&&(b=0);this.q=Math.pow(10,b);return Math.round(a*this.q)/this.q}function cutOffPx(a){return parseFloat(a.toString().substring(0,a.length-2))}function createDiv(a,b){var c=document.createElement("div");c.setAttribute("id",a);c.setAttribute("class",b);return c}function t(){return(new Date).getTime()}function browserCompatible(){try{return new Audio,!0}catch(a){return!1}}function getIntegerFromEndOfString(a){return parseInt(a.match(/\d+$/)[0])}
function rescale(a,b){a.style.transformOrigin="0 0";a.style.transform="scale("+b+", "+b+")";a.style.msTransformOrigin="0 0";a.style.msTransform="scale("+b+", "+b+")";a.style.webkitTransformOrigin="0 0";a.style.webkitTransform="scale("+b+", "+b+")";a.style.OTransformOrigin="0 0";a.style.OTransform="scale("+b+", "+b+")"};function Plugin(a,b){this.delay=a;this.easeIn="undefined"!=typeof b?b:0;this.needsToCalculateEasein=0<this.easeIn;this.startAnimationTimestamp=(new Date).getTime();this.resetStartAnimationTimestamp=function(){this.startAnimationTimestamp=(new Date).getTime()};this.applybehavior=function(){};this.resetPlugin=function(){this.resetStartAnimationTimestamp();this.needsToCalculateEasein=0<this.easeIn};this.age=function(){return(new Date).getTime()-this.startAnimationTimestamp};this.factor=function(){if(this.needsToCalculateEasein&&
0<this.easeIn&&this.age()<this.easeIn)return Math.cos(this.age()/this.easeIn*(Math.PI/2)-Math.PI/2);this.needsToCalculateEasein=!1;return 1};return this};function Scene(a,b){this.id=a;this.title="undefined"!=typeof b?b:a;this.div=createDiv(a,"scene");this.stage=null;this.dimensions={x:0,y:0};this.isVisible=!1;this.actors=[];this.texts=[];this.textDisplaying=!0;this.alwaysShowsText=!1;this.displayedAt=Date.now();this.resetAge=function(){return this.displayedAt=Date.now()};this.age=function(){return Date.now()-this.displayedAt};this.alwaysShowText=function(){this.alwaysShowsText=!0};this.preloadSceneIds=[a];this.resetActors=function(){for(var a=this.actors.length-
1;0<=a;a--)this.actors[a].reset()};this.setDimensions=function(a,b){this.dimensions={x:a,y:b};this.div.style.width=this.dimensions.x+"px";this.div.style.height=this.dimensions.y+"px"};this.makeVisible=function(){this.div.style.visibility="visible";this.isVisible=!0};this.makeInvisible=function(){this.div.style.visibility="hidden";this.isInvisible=!1;this.resetActors()};this.makeInvisible();this.makeOthersInvisible=function(){for(var a=window.animation.textIsDisplaying,b=window.animation.loadedScenes.length-
1;0<=b;b--)window.animation.loadedScenes[b].id.match(this.id)?this.makeVisible():(window.animation.loadedScenes[b].makeInvisible(),window.animation.loadedScenes[b].hideText());a||this.alwaysShowsText?this.showText():this.hideText();window.animation.textIsDisplaying=a};this.mute=function(){for(var a=0;a<this.actors.length;a++)try{this.actors[a].pauseAudio()}catch(b){}};this.muteOthers=function(){for(var a=window.animation.loadedScenes.length-1;0<=a;a--)window.animation.loadedScenes[a].id.match(this.id)||
window.animation.loadedScenes[a].mute()};this.createActor=function(a,b,f,h,g){a=new Actor(a,b,f,h,g);a.scene=this;this.actors.push(a);return a};this.enterActors=function(){for(var a=0;a<this.actors.length;a++)this.actors[a].enter(this)};this.putOnStage=function(a){a.appendChild(this.div);a.scene=this;this.stage=a;this.dimensions={x:parseInt(a.style.width),y:parseInt(a.style.height)};this.div.style.width=this.dimensions.x+"px";this.div.style.height=this.dimensions.y+"px";for(a=0;a<window.stage.scene.actors.length;a++)this.actors[a].enter(this)};
this.write=function(a,b,f,h){var g=document.createElement("div");g.innerHTML=f;g.setAttribute("class","text "+("undefined"===typeof h?"":h));g.style.left=a+"px";g.style.top=b+"px";this.div.appendChild(g);this.texts.push(g)};this.showText=function(){this.textDisplaying=!0;for(var a=this.texts.length-1;0<=a;a--)this.texts[a].style.visibility="visible";window.animation.textIsDisplaying=!0};this.hideText=function(){this.textDisplaying=!1;for(var a=this.texts.length-1;0<=a;a--)this.texts[a].style.visibility=
"hidden";window.animation.textIsDisplaying=!1};return this};function Dissolving(a,b,c){this.actor=a;var d=this.actor.currentOpacity,f;this.reset=function(){this.actor.alterOpacity(d);this.dissolveStartedAt=(new Date).getTime()};this.applybehavior=function(){0<this.actor.currentOpacity&&this.actor.age()>b&&("undefined"===typeof this.dissolveStartedAt&&(this.dissolveStartedAt=(new Date).getTime()),f=1+(this.dissolveStartedAt-(new Date).getTime())/c,this.actor.alterOpacity(f))}}Actor.prototype.dissolves=function(a,b){this.addBehavior(new Dissolving(this,a,b))};
Actor.prototype.dissolvesOnTouch=function(a){this.reacts("this.actor.dissolves(new Date().getTime() - this.actor.startAnimationTimestamp,"+a+");")};function Drifting(a,b,c){this.reset=function(){this.force={x:b,y:c}};this.reset();this.applybehavior=function(){a.vector.x+=this.force.x;a.vector.y+=this.force.y}}Actor.prototype.drifts=function(a,b){this.addBehavior(new Drifting(this,a,b))};function Linking(a,b){this.actor=a;this.url=b;/iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)?bindEvent(this.actor.image,"touchstart",function(){this.gotourl()}):bindEvent(this.actor.image,"mousedown",function(){this.gotourl()});this.actor.image.gotourl=function(){this.removeEventListener("mousedown",arguments.callee,!1);location.href=b};this.actor.image.style.cursor="pointer";this.applybehavior=function(){}}Actor.prototype.links=function(a){this.addBehavior(new Linking(this,a))};function Moving(a,b,c,d,f,h,g){var e=new Plugin(h,g);e.actor=a;e.force={x:b,y:c};e.speed={x:0,y:0};e.friction=d;e.gravitation=f;e.triggeredByTouch=!1;e.reset=function(){this.resetPlugin();e.speed={x:0,y:0};e.force={x:b,y:c}};e.reset();e.applybehavior=function(){1!=this.factor()&&(console.log("this.factor(): "+this.factor()),console.log("this.age(): "+this.age()));e.force.x*=0.9;e.force.y*=0.9;"undefined"!=typeof e.gravitation&&(e.force.y+=e.gravitation/50);e.speed.x+=e.force.x;e.speed.y+=e.force.y;
"undefined"!=typeof e.friction&&(e.speed.x*=1-e.friction/50,e.speed.y*=1-e.friction/50);e.actor.vector.x+=e.speed.x*this.factor();e.actor.vector.y+=e.speed.y*this.factor()};return e}Actor.prototype.moves=function(a,b,c,d,f,h){this.addBehavior(new Moving(this,a,b,c,d,f,h))};
Actor.prototype.movesOnTouch=function(a,b,c,d,f,h){a=a+","+b;"undefined"!=typeof c&&(a+=", "+c);"undefined"!=typeof d&&(a+=", "+d);"undefined"!=typeof f&&(a+=", "+f);"undefined"!=typeof h&&(a+=", "+h);this.reacts("this.actor.moves("+a+");")};function Playing(a,b,c){var d=new Plugin(0,0);d.actor=a;d.actor.playingImagePath="images/"+c;d.actor.waitingImagePath=d.actor.image.src;d.actor.showPlayingImage=function(){this.image.src=this.playingImagePath};d.actor.showWaitingImage=function(){this.image.src=this.waitingImagePath};d.actor.audio=document.createElement("audio");c=document.createElement("source");c.type=d.actor.audio.canPlayType("audio/mpeg;")?"audio/mpeg":"audio/ogg";c.src="audio/"+b+".mp3";d.actor.audio.appendChild(c);d.actor.audio.actor=
d.actor;d.actor.audio.load();bindEvent(d.actor.audio,"ended",function(){this.actor.showWaitingImage(this.actor);this.actor.audioplaying=!1});d.actor.audioplaying=!1;d.actor.toggleAudio=function(){this.audioplaying?(this.audio.pause(),this.audioplaying=!1,this.showWaitingImage()):(this.audio.currentTime&&(this.audio.currentTime=0),this.audio.play(),this.showPlayingImage(),this.audioplaying=!0)};d.actor.pauseAudio=function(){this.audio.pause()};d.actor.addBehavior(new Reacting(a,"this.actor.toggleAudio();"));
return d}Actor.prototype.plays=function(a,b){this.addBehavior(new Playing(this,a,b))};function Pulsating(a,b,c){this.applybehavior=function(){var d=1+c/20*Math.sin(2*new Date*b/500);a.image.style.webkitTransform="scale("+d+", "+d+")"}}Actor.prototype.pulsates=function(a,b,c){this.addBehavior(new Pulsating(this,a,b,c))};function Reacting(a,b,c){var d=new Plugin(0,0);d.actor=a;d.actor.action=b;"undefined"!=typeof c&&(c="images/"+c,document.createElement("img").setAttribute("src",c),d.actor.image.actionimagepath=c);a=/iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)?"touchstart":"mousedown";bindEvent(d.actor.image,a,function(){changeImageAndReact.call(d.actor.image)});d.actor.image.style.cursor="pointer";return d}
function changeImageAndReact(){if("undefined"!=typeof this.actionimagepath&&(this.originalimagepath=this.src,this.src=this.actionimagepath,"undefined"!=typeof actionimagelength&&0<parseInt("0"+actionimagelength))){var a=this;window.setTimeout(function(){parseInt(a.src=a.originalimagepath)},200)}eval(this.actor.action)}Actor.prototype.reacts=function(a,b,c){this.addBehavior(new Reacting(this,a,b,c))};function Rotating(a,b){this.spin=6*b;this.applybehavior=function(){a.spin+=this.spin}}Actor.prototype.rotates=function(a,b){var c=new Rotating(this,a);b&&(c.ontouch=!0);this.addBehavior(c)};Actor.prototype.rotatesOnTouch=function(a){this.reacts("this.actor.rotates("+a+", true);")};function Shaking(a,b,c,d){this.reset=function(){this.peak={x:b/2,y:c/2};this.hertz=d;this.actor=a;this.force={x:0,y:0}};this.applybehavior=function(){"undefined"===typeof this.shakingStartedAt&&(this.shakingStartedAt=(new Date).getTime());this.tmpValue=Math.sin((this.shakingStartedAt-(new Date).getTime())*this.hertz/250);"undefined"!=typeof this.lastTmpValue&&(this.actor.vector.x+=(this.lastTmpValue-this.tmpValue)*this.peak.x,this.actor.vector.y+=(this.lastTmpValue-this.tmpValue)*this.peak.y);this.lastTmpValue=
this.tmpValue}}Actor.prototype.shakes=function(a,b,c){this.addBehavior(new Shaking(this,a,b,c))};Actor.prototype.shakesOnTouch=function(a,b,c){this.reacts("this.actor.shakes("+a+","+b+","+c+");")};function Swinging(a,b,c,d,f){var h=0;this.applybehavior=function(){h=Math.sin(new Date*c/1E3);degrees=h*b;a.image.style.webkitTransformOrigin=d+"px "+f+"px";a.image.style.webkitTransform="rotate("+degrees/2+"deg)"}}Actor.prototype.swings=function(a,b,c,d){this.addBehavior(new Swinging(this,a,b,c,d))};function togglesText(a){this.reset=function(){this.force={x:forceX,y:forceY}};this.reset();this.applybehavior=function(){a.vector.x+=this.force.x;a.vector.y+=this.force.y}}Actor.prototype.toggle=function(){this.scene.textDisplaying?(this.image.src="images/"+this.textToggleAlternativeImagePath,this.scene.hideText()):(this.image.src="images/"+this.image.originalPath,this.scene.showText())};Actor.prototype.togglesTextOnTouch=function(a){this.textToggleAlternativeImagePath=a;this.reacts("this.actor.toggle();")};function Waving(a,b,c,d,f){this.reset=function(){this.actor=a;this.hertz=c;this.radius=b};this.applybehavior=function(){"undefined"===typeof this.wavingStartedAt&&(this.wavingStartedAt=(new Date).getTime());this.skew=Math.sin((this.wavingStartedAt-(new Date).getTime())*this.hertz/1E3)*this.radius;this.actor.image.style.webkitTransformOrigin=d+"px "+f+"px";this.actor.image.style.webkitTransform="skew("+this.skew+"deg, 0deg)";this.actor.image.style.transformOrigin=d+"px "+f+"px";this.actor.image.style.transform=
"skew("+this.skew+"deg, 0deg)";this.actor.image.style.msTransformOrigin=d+"px "+f+"px";this.actor.image.style.msTransform="skew("+this.skew+"deg, 0deg)";this.actor.image.style.OTransformOrigin=d+"px "+f+"px";this.actor.image.style.OTransform="skew("+this.skew+"deg, 0deg)"}}Actor.prototype.waves=function(a,b,c,d){this.addBehavior(new Waving(this,a,b,c,d))};
